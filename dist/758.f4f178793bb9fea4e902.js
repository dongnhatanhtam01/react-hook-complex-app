(self.webpackChunkcomplex_app_react_review=self.webpackChunkcomplex_app_react_review||[]).push([[758],{7758:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>E});var n=a(7294),l=a(1203),s=a(9669),r=a.n(s),c=a(5977),o=a(3727),i=a(7062),m=a(8456),u=a.n(m),d=a(7913),p=a(2210),h=a(7564),f=a(3983);const E=(0,c.EN)((function(e){const t=(0,n.useContext)(h.Z),a=(0,n.useContext)(f.Z),{id:s}=(0,c.UO)(),[m,E]=(0,n.useState)(!0),[y,g]=(0,n.useState)();if((0,n.useEffect)((()=>{const e=r().CancelToken.source();return async function(){try{const t=await r().get(`/post/${s}`,{cancelToken:e.token});g(t.data),E(!1)}catch(e){console.log("There was a problem or the request was cancel")}}(),()=>{e.cancel()}}),[s]),!m&&!y)return n.createElement(p.Z,null);if(m)return n.createElement(l.Z,{title:"..."},n.createElement(i.Z,null));const w={};!async function(){try{const t=await r().get(`${e.location.pathname}`);w[createDate]=t.createDate,console.log(w)}catch(e){}}();const N=new Date(y.createdDate),k=`${N.getMonth()+1}/${N.getDate()}/${N.getFullYear()}`;return n.createElement(l.Z,{title:y.title},n.createElement("div",{className:"d-flex justify-content-between"},n.createElement("h2",null,y.title),!!t.loggedIn&&t.user.username==y.author.username&&n.createElement("span",{className:"pt-2"},n.createElement(o.OL,{to:`/post/${s}/edit`,"data-tip":"Edit-marker","data-for":"edit",className:"text-primary mr-2"},n.createElement("i",{className:"fas fa-edit"})),n.createElement(d.Z,{id:"edit",className:"custom-tooltip"})," "," ",n.createElement("a",{onClick:n=>async function(n){if(console.log(n),window.confirm("Do you really want to delete this post?"))try{"Success"==(await r().delete(`/post/${s}`,{data:{token:t.user.token}})).data&&(a({type:"FLASH_MESSAGE_ACTION",value:`the post ${y.title}   -   has been deleted`}),e.history.push(`/profile/${t.user.username}`))}catch(e){console.log("There was a problem in delete function!")}}(n),"data-tip":"delete-marker","data-for":"delete",className:"delete-post-button text-danger"},n.createElement("i",{className:"fas fa-trash"})),n.createElement(d.Z,{id:"delete",className:"custom-tooltip"}))),n.createElement("p",{className:"text-muted small mb-4"},n.createElement(o.OL,{to:`/profile/${y.author.username}`},n.createElement("img",{className:"avatar-tiny",src:y.author.avatar})),"Posted by ",n.createElement(o.OL,{to:`/profile/${y.author.username}`},y.author.username)," on "," ",k),n.createElement("div",{className:"body-content"},n.createElement(u(),{children:y.body,allowedTypes:["paragraph","strong","emphasis","text","heading","list","listItem"]})))}))}}]);